================================================================================
                        ADVISOR COMPONENT TREE
                        Zynava Supplement Advisor
                        Last Updated: December 2024
================================================================================

FOLDER STRUCTURE
================================================================================

src/components/advisor/
‚îú‚îÄ‚îÄ AdvisorModal.tsx              # Modal overlay wrapper
‚îú‚îÄ‚îÄ AdvisorModal.module.css       # Modal styles
‚îú‚îÄ‚îÄ AdvisorChat.tsx               # Main chat orchestrator (CORE)
‚îú‚îÄ‚îÄ AdvisorChat.module.css        # Chat container styles
‚îú‚îÄ‚îÄ AdvisorQuizController.tsx     # Quiz state management hook
‚îú‚îÄ‚îÄ ChatBubble.tsx                # Message bubble component
‚îú‚îÄ‚îÄ ChatBubble.module.css         # Bubble styles
‚îú‚îÄ‚îÄ QuizButton.tsx                # Quiz option button
‚îú‚îÄ‚îÄ QuizButton.module.css         # Button styles
‚îú‚îÄ‚îÄ types.ts                      # TypeScript definitions
‚îú‚îÄ‚îÄ index.tsx                     # Public exports
‚îú‚îÄ‚îÄ ADVISOR_TREE.txt              # This documentation file
‚îú‚îÄ‚îÄ QUIZ_REDESIGN_NOTES.md        # Design notes (historical)
‚îú‚îÄ‚îÄ RESPONSIVE_DESIGN.md          # Responsive design notes
‚îÇ
‚îî‚îÄ‚îÄ AdvisorChat/                  # Sub-components folder
    ‚îú‚îÄ‚îÄ AdvisorInputBar.tsx       # ChatGPT-style input bar
    ‚îú‚îÄ‚îÄ AdvisorInputBar.module.css
    ‚îú‚îÄ‚îÄ WelcomeSequence.tsx       # Animated welcome messages
    ‚îú‚îÄ‚îÄ WelcomeSequence.module.css
    ‚îú‚îÄ‚îÄ QuizStepRenderer.tsx      # Renders quiz questions/options
    ‚îú‚îÄ‚îÄ QuizStepRenderer.module.css
    ‚îú‚îÄ‚îÄ TypingIndicator.tsx       # Typing dots animation
    ‚îú‚îÄ‚îÄ TypingIndicator.module.css
    ‚îú‚îÄ‚îÄ ProgressIndicator.tsx     # Step progress bar
    ‚îú‚îÄ‚îÄ ProgressIndicator.module.css
    ‚îú‚îÄ‚îÄ UserSelectionSummary.tsx  # User selection display (disabled)
    ‚îú‚îÄ‚îÄ useQuizSelection.ts       # Selection state hook
    ‚îú‚îÄ‚îÄ quizData.ts               # Quiz questions/options data
    ‚îî‚îÄ‚îÄ index.ts                  # Subfolder exports


================================================================================
COMPONENT HIERARCHY
================================================================================

AdvisorModal (overlay)
  ‚îî‚îÄ‚îÄ AdvisorChat (orchestrator)
        ‚îÇ
        ‚îú‚îÄ‚îÄ [HEADER]
        ‚îÇ     ‚îú‚îÄ‚îÄ Title: "Supplement Advisor"
        ‚îÇ     ‚îú‚îÄ‚îÄ Subtitle: "Your personal supplement decision guide."
        ‚îÇ     ‚îú‚îÄ‚îÄ Close Button (‚úï)
        ‚îÇ     ‚îî‚îÄ‚îÄ Reset Button (‚Ü∫) - only during quiz
        ‚îÇ
        ‚îú‚îÄ‚îÄ [MESSAGES CONTAINER] (scrollable)
        ‚îÇ     ‚îÇ
        ‚îÇ     ‚îú‚îÄ‚îÄ WelcomeSequence
        ‚îÇ     ‚îÇ     ‚îú‚îÄ‚îÄ TypingIndicator (step 0)
        ‚îÇ     ‚îÇ     ‚îú‚îÄ‚îÄ ChatBubble: "Hi, I'm Z."
        ‚îÇ     ‚îÇ     ‚îú‚îÄ‚îÄ TypingIndicator (step 2)
        ‚îÇ     ‚îÇ     ‚îú‚îÄ‚îÄ ChatBubble: "Skip the endless searching..."
        ‚îÇ     ‚îÇ     ‚îú‚îÄ‚îÄ ChatBubble: "No personal info or sign up..."
        ‚îÇ     ‚îÇ     ‚îî‚îÄ‚îÄ GetStartedButton (hidden after click)
        ‚îÇ     ‚îÇ
        ‚îÇ     ‚îî‚îÄ‚îÄ Quiz Flow (after Get Started)
        ‚îÇ           ‚îú‚îÄ‚îÄ ChatBubble (question)
        ‚îÇ           ‚îî‚îÄ‚îÄ QuizStepRenderer
        ‚îÇ                 ‚îú‚îÄ‚îÄ ProgressIndicator
        ‚îÇ                 ‚îî‚îÄ‚îÄ QuizButton (√óN options)
        ‚îÇ
        ‚îî‚îÄ‚îÄ [INPUT BAR]
              ‚îî‚îÄ‚îÄ AdvisorInputBar (ChatGPT-style)
                    ‚îú‚îÄ‚îÄ Plus button (+)
                    ‚îú‚îÄ‚îÄ Textarea input
                    ‚îú‚îÄ‚îÄ Mic button (when empty)
                    ‚îî‚îÄ‚îÄ Send button (when has text)


================================================================================
COMPONENT DETAILS
================================================================================

------------------------------------------------------------------------------
AdvisorModal.tsx
------------------------------------------------------------------------------
Purpose: Modal overlay that wraps the chat interface
Props:
  - isOpen: boolean         # Controls visibility
  - onClose: () => void     # Close handler

Features:
  - Prevents body scroll when open
  - Click outside to close
  - Fade-in animation
  - Backdrop blur effect

Renders: <AdvisorChat onClose={onClose} />

------------------------------------------------------------------------------
AdvisorChat.tsx (CORE ORCHESTRATOR)
------------------------------------------------------------------------------
Purpose: Main chat interface, orchestrates all sub-components
Props:
  - onClose: () => void     # Close handler from modal

State:
  - showQuiz: boolean           # Quiz mode active
  - welcomeComplete: boolean    # Welcome sequence finished
  - isTyping: boolean           # Typing indicator visible

Uses Hook: useAdvisorQuiz(handleComplete)
  Returns: currentStep, steps, input, handlers, canProceed, resetQuiz

Features:
  - Auto-scroll to keep new content visible
  - Auto-advance after selection (except concerns)
  - Reset functionality for testing

Renders:
  - WelcomeSequence
  - ChatBubble (for questions)
  - QuizStepRenderer
  - TypingIndicator
  - AdvisorInputBar

------------------------------------------------------------------------------
AdvisorQuizController.tsx
------------------------------------------------------------------------------
Purpose: Custom hook for quiz state management
Export: useAdvisorQuiz(onComplete)

State:
  - currentStep: string         # Current quiz step ID
  - input: AdvisorInput         # User's selections
  - messages: AdvisorMessage[]  # Message history

Handlers:
  - handleGoalSelect(goalId)
  - handleLifestyleSelect(value)
  - handleDietSelect(value)
  - handleConcernSelect(concernId)
  - handleBudgetSelect(value)
  - handleNext()
  - resetQuiz()

Returns:
  - currentStep, steps, input, messages
  - All handlers
  - canProceed() function

------------------------------------------------------------------------------
ChatBubble.tsx
------------------------------------------------------------------------------
Purpose: Individual message bubble
Props:
  - message: React.ReactNode    # Message content (supports JSX)
  - sender: 'advisor' | 'user'  # Determines styling
  - timestamp: Date             # Display time

Styles:
  - Advisor: Left-aligned, light orange (#fff5f0)
  - User: Right-aligned, orange (#ff6b35)

------------------------------------------------------------------------------
QuizButton.tsx
------------------------------------------------------------------------------
Purpose: Clickable option button for quiz
Props:
  - id: string              # Unique identifier
  - label: string           # Display text (can include emoji prefix)
  - value: string           # Value to pass to handler
  - description?: string    # Optional subtitle
  - isSelected?: boolean    # Selected state
  - onClick: (value) => void
  - disabled?: boolean
  - multiSelect?: boolean   # Shows checkbox (only for concerns)

Features:
  - Auto-extracts emoji from label (e.g., "üõ°Ô∏è Boost Immunity")
  - Hover effects with lift animation
  - Selected state with orange border

------------------------------------------------------------------------------
AdvisorChat/WelcomeSequence.tsx
------------------------------------------------------------------------------
Purpose: Animated welcome message sequence
Props:
  - onGetStarted: () => void    # Button click handler
  - hideButton?: boolean        # Hide button after clicked

Animation Steps:
  0: Typing indicator
  1: First greeting ("Hi, I'm Z.")
  2: Typing indicator
  3: Two explanation bubbles
  4: Get Started button appears

Timing: 1200ms ‚Üí 2000ms ‚Üí 3200ms ‚Üí 4000ms

------------------------------------------------------------------------------
AdvisorChat/QuizStepRenderer.tsx
------------------------------------------------------------------------------
Purpose: Renders quiz question options
Props:
  - step: AdvisorStep           # Current step data
  - input: AdvisorInput         # User's selections
  - onGoalSelect, onLifestyleSelect, onDietSelect, 
    onConcernSelect, onBudgetSelect   # Selection handlers
  - canProceed: boolean         # Enable continue button
  - onNext: () => void          # Continue handler

Renders:
  - ProgressIndicator (Step X of Y)
  - Grid of QuizButtons
  - Continue button (when canProceed)

Uses Hook: useQuizSelection({ step, input })

------------------------------------------------------------------------------
AdvisorChat/ProgressIndicator.tsx
------------------------------------------------------------------------------
Purpose: Shows quiz progress
Props:
  - currentStep: number     # Current step (1-based)
  - totalSteps: number      # Total quiz steps

Display: "Step 1 of 5 ‚Ä¢ 20%"
         [========          ]

------------------------------------------------------------------------------
AdvisorChat/TypingIndicator.tsx
------------------------------------------------------------------------------
Purpose: Animated typing dots
Props:
  - isVisible: boolean      # Show/hide

Display: Three bouncing dots (...)

------------------------------------------------------------------------------
AdvisorChat/AdvisorInputBar.tsx
------------------------------------------------------------------------------
Purpose: ChatGPT-style message input
Props:
  - onSend: (message: string) => void
  - disabled?: boolean
  - placeholder?: string    # Default: "Ask anything"

Features:
  - Auto-resizing textarea
  - Plus button (attachment - TODO)
  - Mic button (voice input - TODO)
  - Send button (appears when has text)
  - Enter to send, Shift+Enter for newline

------------------------------------------------------------------------------
AdvisorChat/UserSelectionSummary.tsx (DISABLED)
------------------------------------------------------------------------------
Purpose: Shows user's selection as a chat bubble
Status: Currently commented out in AdvisorChat.tsx
Props:
  - currentStep: string
  - input: AdvisorInput

Can be re-enabled for showing selection confirmations.

------------------------------------------------------------------------------
AdvisorChat/useQuizSelection.ts
------------------------------------------------------------------------------
Purpose: Hook for checking if option is selected
Usage: const { getIsSelected } = useQuizSelection({ step, input })

Returns:
  - getIsSelected(optionValue: string): boolean


================================================================================
TYPE DEFINITIONS (types.ts)
================================================================================

GoalId:
  'overall-health' | 'boost-immunity' | 'energy-vitality' | 
  'bone-joint' | 'heart-health' | 'gut-health' | 
  'sleep-stress' | 'brain-health'

AgeRange:
  '25-35' | '36-50' | '51-65' | '65+'

ActivityLevel:
  'very-active' | 'moderately-active' | 'lightly-active' | 'sedentary'

DietType:
  'no-preference' | 'vegan' | 'gluten-free'

ConcernId:
  'sleep-quality' | 'low-energy' | 'digestive-sensitivity' | 
  'joint-discomfort' | 'stress-anxiety' | 'none'

BudgetTier:
  'budget-conscious' | 'moderate-spending' | 'premium-quality'

AdvisorInput:
  {
    goals: GoalId[]
    ageRange?: AgeRange
    activityLevel?: ActivityLevel
    diet?: DietType
    concerns: ConcernId[]
    budgetTier?: BudgetTier
  }

AdvisorStep:
  {
    id: string
    type: 'welcome' | 'goals' | 'lifestyle' | 'diet' | 
          'concerns' | 'budget' | 'processing' | 'results'
    message: string
    options?: QuizOption[]
    isComplete: boolean
  }

QuizOption:
  {
    id: string
    label: string
    value: string
    description?: string
  }

AdvisorMessage:
  {
    id: string
    type: 'text' | 'quiz-step' | 'component'
    sender: 'advisor' | 'user'
    text?: string
    step?: AdvisorStep
    component?: React.ReactNode
    timestamp: Date
  }


================================================================================
QUIZ DATA (quizData.ts)
================================================================================

STEP_ORDER: ['welcome', 'goals', 'lifestyle', 'diet', 'concerns', 'budget']

QUIZ_STEPS:
  welcome:
    message: "Hi! I'm your Zynava Supplement Advisor..."
    
  goals (8 options):
    üí™ Overall Health & Wellness
    üõ°Ô∏è Boost Immunity
    ‚ö° Energy & Vitality
    ü¶¥ Bone & Joint Health
    ‚ù§Ô∏è Heart Health
    üå± Gut Health
    üò¥ Sleep & Stress Relief
    üß† Brain Health & Memory
    
  lifestyle (4 options):
    üèÉ‚Äç‚ôÇÔ∏è Very Active (5+ times/week)
    üö∂‚Äç‚ôÇÔ∏è Moderately Active (2-4 times/week)
    üßò‚Äç‚ôÄÔ∏è Lightly Active (1-2 times/week)
    üí∫ Sedentary
    
  diet (3 options):
    üçΩÔ∏è No Preference
    üå± Vegan
    üåæ Gluten-Free
    
  concerns (6 options - MULTI-SELECT):
    Sleep quality issues
    Low energy
    Digestive sensitivity
    Joint discomfort
    Stress/anxiety
    None of the above
    
  budget (3 options):
    üí∞ Budget Conscious
    üí≥ Moderate Spending
    üíé Premium Quality


================================================================================
PUBLIC EXPORTS (index.tsx)
================================================================================

Components:
  - AdvisorModal
  - AdvisorChat
  - ChatBubble
  - QuizButton

Hooks:
  - useAdvisorQuiz

Types:
  - All types from types.ts


================================================================================
CSS STYLING NOTES
================================================================================

Font: Inter (industry standard for chat interfaces)
Primary Color: #ff6b35 (Zynava Orange)
Background: #fff5f0 (Light Orange) for advisor bubbles
Border Radius: 12-16px for modern rounded look

Responsive Breakpoints:
  - 768px: Tablet
  - 480px: Mobile (iPhone 16 Pro, etc.)
  - 390px: Small phones (iPhone SE, 13 mini)
  - 700px height: Landscape mode

Animations:
  - fadeIn: 0.2s ease
  - slideIn: 0.3s cubic-bezier
  - Typing dots: bounce animation
  - Button hover: translateY(-3px) lift


================================================================================
HOW TO USE / IMPORT
================================================================================

Opening the Advisor Modal:
--------------------------
import { AdvisorModal } from '@/components/advisor'

// In your component:
const [isModalOpen, setIsModalOpen] = useState(false)

<button onClick={() => setIsModalOpen(true)}>
  Open Advisor
</button>

<AdvisorModal 
  isOpen={isModalOpen} 
  onClose={() => setIsModalOpen(false)} 
/>

Using Individual Components:
----------------------------
import { ChatBubble, QuizButton } from '@/components/advisor'

<ChatBubble 
  message="Hello!" 
  sender="advisor" 
  timestamp={new Date()} 
/>

<QuizButton
  id="option-1"
  label="üí™ Option One"
  value="option-1"
  isSelected={selectedValue === 'option-1'}
  onClick={(value) => setSelectedValue(value)}
/>

Using the Quiz Hook:
--------------------
import { useAdvisorQuiz } from '@/components/advisor'

const {
  currentStep,
  input,
  handleGoalSelect,
  handleNext,
  canProceed,
} = useAdvisorQuiz((completedInput) => {
  // Called when quiz is complete
  console.log('User selections:', completedInput)
})


================================================================================
USER JOURNEY / FLOW
================================================================================

1. USER CLICKS "Supplement Advisor" button (on homepage)
   ‚îî‚îÄ‚îÄ SupplementAdvisorCard.tsx triggers setIsModalOpen(true)

2. MODAL OPENS
   ‚îî‚îÄ‚îÄ AdvisorModal mounts ‚Üí AdvisorChat mounts

3. WELCOME SEQUENCE (4 seconds total)
   ‚îú‚îÄ‚îÄ [0.0s] Typing indicator appears
   ‚îú‚îÄ‚îÄ [1.2s] "Hi, I'm Z." bubble
   ‚îú‚îÄ‚îÄ [2.0s] Typing indicator
   ‚îú‚îÄ‚îÄ [3.2s] Two explanation bubbles
   ‚îî‚îÄ‚îÄ [4.0s] "Get Started ‚Üí" button

4. USER CLICKS "Get Started"
   ‚îú‚îÄ‚îÄ welcomeComplete = true (button hides)
   ‚îú‚îÄ‚îÄ showQuiz = true
   ‚îî‚îÄ‚îÄ handleNext() ‚Üí moves to 'goals' step

5. QUIZ FLOW (5 steps)
   ‚îú‚îÄ‚îÄ GOALS: Select primary wellness goal (single)
   ‚îÇ   ‚îî‚îÄ‚îÄ Auto-advance after 500ms
   ‚îú‚îÄ‚îÄ LIFESTYLE: Select activity level (single)
   ‚îÇ   ‚îî‚îÄ‚îÄ Auto-advance after 500ms
   ‚îú‚îÄ‚îÄ DIET: Select dietary preference (single)
   ‚îÇ   ‚îî‚îÄ‚îÄ Auto-advance after 500ms
   ‚îú‚îÄ‚îÄ CONCERNS: Select concerns (multi, optional)
   ‚îÇ   ‚îî‚îÄ‚îÄ User clicks "Continue ‚Üí"
   ‚îî‚îÄ‚îÄ BUDGET: Select budget tier (single)
       ‚îî‚îÄ‚îÄ Auto-advance ‚Üí triggers handleComplete

6. PROCESSING
   ‚îî‚îÄ‚îÄ isTyping = true, show typing indicator

7. RESULTS (TODO)
   ‚îî‚îÄ‚îÄ Show personalized recommendations


================================================================================
STATE FLOW DIAGRAM
================================================================================

SupplementAdvisorCard
  ‚îÇ
  ‚îÇ isModalOpen = true
  ‚ñº
AdvisorModal
  ‚îÇ
  ‚îÇ renders
  ‚ñº
AdvisorChat ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ                                                           ‚îÇ
  ‚îÇ  State:                                                   ‚îÇ
  ‚îÇ  ‚îú‚îÄ‚îÄ showQuiz: false ‚Üí true (after Get Started)          ‚îÇ
  ‚îÇ  ‚îú‚îÄ‚îÄ welcomeComplete: false ‚Üí true                       ‚îÇ
  ‚îÇ  ‚îî‚îÄ‚îÄ isTyping: false ‚Üí true (when processing)            ‚îÇ
  ‚îÇ                                                           ‚îÇ
  ‚îÇ  useAdvisorQuiz hook                                      ‚îÇ
  ‚îÇ  ‚îú‚îÄ‚îÄ currentStep: 'welcome' ‚Üí 'goals' ‚Üí ... ‚Üí 'budget'   ‚îÇ
  ‚îÇ  ‚îî‚îÄ‚îÄ input: { goals: [], concerns: [], ... }             ‚îÇ
  ‚îÇ                                                           ‚îÇ
  ‚ñº                                                           ‚îÇ
WelcomeSequence                                               ‚îÇ
  ‚îÇ                                                           ‚îÇ
  ‚îÇ  animationStep: 0 ‚Üí 1 ‚Üí 2 ‚Üí 3 ‚Üí 4                        ‚îÇ
  ‚îÇ                                                           ‚îÇ
  ‚îÇ onGetStarted()                                           ‚îÇ
  ‚ñº                                                           ‚îÇ
QuizStepRenderer                                              ‚îÇ
  ‚îÇ                                                           ‚îÇ
  ‚îÇ  Renders options based on currentStep                     ‚îÇ
  ‚îÇ  User clicks option ‚Üí handler updates input               ‚îÇ
  ‚îÇ  canProceed() ‚Üí true ‚Üí auto-advance (500ms)              ‚îÇ
  ‚îÇ                                                           ‚îÇ
  ‚îÇ After budget step:                                        ‚îÇ
  ‚ñº                                                           ‚îÇ
handleComplete(input) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  ‚îÇ
  ‚îÇ  TODO: Call API, show results
  ‚ñº


================================================================================
DEPENDENCIES BETWEEN FILES
================================================================================

AdvisorModal.tsx
  ‚îî‚îÄ‚îÄ imports: AdvisorChat

AdvisorChat.tsx (orchestrator)
  ‚îú‚îÄ‚îÄ imports: ChatBubble
  ‚îú‚îÄ‚îÄ imports: AdvisorChat/TypingIndicator
  ‚îú‚îÄ‚îÄ imports: AdvisorChat/WelcomeSequence
  ‚îú‚îÄ‚îÄ imports: AdvisorChat/QuizStepRenderer
  ‚îú‚îÄ‚îÄ imports: AdvisorChat/UserSelectionSummary (disabled)
  ‚îú‚îÄ‚îÄ imports: AdvisorChat/AdvisorInputBar
  ‚îú‚îÄ‚îÄ imports: AdvisorQuizController (hook)
  ‚îú‚îÄ‚îÄ imports: AdvisorChat/quizData
  ‚îî‚îÄ‚îÄ imports: types

AdvisorQuizController.tsx
  ‚îú‚îÄ‚îÄ imports: AdvisorChat/quizData
  ‚îî‚îÄ‚îÄ imports: types

WelcomeSequence.tsx
  ‚îú‚îÄ‚îÄ imports: ChatBubble
  ‚îî‚îÄ‚îÄ imports: TypingIndicator

QuizStepRenderer.tsx
  ‚îú‚îÄ‚îÄ imports: QuizButton
  ‚îú‚îÄ‚îÄ imports: ProgressIndicator
  ‚îú‚îÄ‚îÄ imports: useQuizSelection
  ‚îú‚îÄ‚îÄ imports: quizData
  ‚îî‚îÄ‚îÄ imports: types

UserSelectionSummary.tsx
  ‚îú‚îÄ‚îÄ imports: ChatBubble
  ‚îú‚îÄ‚îÄ imports: quizData
  ‚îî‚îÄ‚îÄ imports: types

useQuizSelection.ts
  ‚îî‚îÄ‚îÄ imports: types

quizData.ts
  ‚îî‚îÄ‚îÄ imports: types


================================================================================
ACCESSIBILITY NOTES
================================================================================

Keyboard Navigation:
  - Tab through quiz options
  - Enter/Space to select
  - Modal closes on Escape (TODO)

ARIA Labels:
  - aria-label on close button: "Close advisor"
  - aria-label on reset button: "Reset quiz"
  - aria-label on send button: "Send message"
  - aria-pressed on QuizButton for selection state

Touch Targets:
  - Minimum 44px on mobile (iOS requirement)
  - Buttons scale up on mobile breakpoints

Focus Management:
  - Input bar focuses on mount
  - Focus returns to trigger on close (TODO)


================================================================================
TROUBLESHOOTING / COMMON ISSUES
================================================================================

Issue: Multiple options appearing selected
Fix: Ensure option values are unique and match types exactly
     Check useQuizSelection.ts for correct comparisons

Issue: Quiz not auto-advancing
Fix: Check canProceed() logic in AdvisorQuizController.tsx
     Verify the step type is in the auto-advance list

Issue: Scroll not working properly
Fix: Check messagesContainerRef is attached
     Verify min-height: 0 on flex containers
     Check for overflow: hidden conflicts

Issue: Welcome messages disappearing
Fix: Ensure welcomeComplete controls button visibility only
     WelcomeSequence should always render after animationStep >= 1

Issue: Emojis not displaying as icons
Fix: Check emoji detection in QuizButton.tsx
     Ensure emoji is at start of label with space separator
     Emojis with variation selectors need length <= 4 check

Issue: Modal not closing
Fix: Check onClose prop is passed through AdvisorChat
     Verify stopPropagation on modal content click


================================================================================
TESTING NOTES
================================================================================

Manual Testing Checklist:
  [ ] Open modal from homepage
  [ ] Welcome sequence plays correctly (4 seconds)
  [ ] "Get Started" button works
  [ ] Each quiz step loads
  [ ] Options select correctly (no multi-select on singles)
  [ ] Auto-advance works after selection
  [ ] Concerns step allows multi-select
  [ ] Continue button works on concerns
  [ ] Progress indicator updates
  [ ] Reset button clears all state
  [ ] Close button closes modal
  [ ] Click outside closes modal
  [ ] Responsive at all breakpoints
  [ ] Input bar appears at bottom

Reset State (for testing):
  - Click ‚Ü∫ button during quiz
  - Clears all selections
  - Returns to welcome state


================================================================================
TODO / FUTURE WORK
================================================================================

[ ] API Integration
    - Connect handleComplete to /api/advisor
    - Implement recommendation engine
    - Stream responses for real-time feel
    
[ ] Input Bar Features
    - Implement file attachment (plus button)
    - Implement voice input (mic button)
    - Handle free-form user messages
    - Integrate with OpenAI for conversational mode
    
[ ] Results Display
    - Show supplement recommendations
    - Product cards with affiliate links
    - Comparison features
    - "Why this works for you" explanations
    
[ ] Data Files
    - Create data/terrains.json
    - Create data/ingredients.json
    - Create data/affiliates.json
    
[ ] Analytics
    - Track quiz completion rates
    - Track option selections
    - Track drop-off points
    - A/B test quiz flow
    
[ ] Enhancements
    - Add "Go Back" functionality
    - Save progress to localStorage
    - Email results option
    - Share results feature
    - Dark mode support


================================================================================
VERSION HISTORY
================================================================================

v1.0 (December 2024)
  - Initial implementation
  - Quiz flow with 5 steps
  - Welcome sequence with animation
  - ChatGPT-style input bar
  - Responsive design for all devices
  - Progress indicator
  - Auto-advance on selection


================================================================================
END OF DOCUMENTATION
================================================================================

